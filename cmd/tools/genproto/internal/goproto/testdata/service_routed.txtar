-- proto.mod --
module github.com/example/proto
-- common/types.proto --
syntax = "proto3";

package example.common;

option go_package = "github.com/example/gen/common";

message Metadata {
  string created_by = 1;
  int64 timestamp = 2;
}
-- smartcore/devices/v1/device.proto --
syntax = "proto3";

package example.devices.v1;

import "common/types.proto";

option go_package = "github.com/example/gen/devices/v1";

// Routed API - all request messages have 'name' string field
service DeviceApi {
  rpc GetDevice(GetDeviceRequest) returns (Device);
  rpc UpdateDevice(UpdateDeviceRequest) returns (Device);
  rpc DeleteDevice(DeleteDeviceRequest) returns (Device);
}

message GetDeviceRequest {
  string name = 1;  // Required for routing
}

message UpdateDeviceRequest {
  string name = 1;  // Required for routing
  Device device = 2;
  example.common.Metadata metadata = 3;
}

message DeleteDeviceRequest {
  string name = 1;  // Required for routing
}

message Device {
  string id = 1;
  string model = 2;
  example.common.Metadata metadata = 3;
}

